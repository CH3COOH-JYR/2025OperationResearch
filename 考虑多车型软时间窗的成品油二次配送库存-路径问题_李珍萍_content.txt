投稿网址:www. stae. com. cn
2022 年第22 卷第18 期
2022, 22(18): 08043 -07　
科　学　技　术　与　工　程
Science Technology and Engineering
　
ISSN 1671—1815
CN 11—4688 / T
收稿日期: 2021-10-25;　　修订日期: 2022-04-01
基金项目: 国家自然科学基金(71771028 ); 北京市自然科学基金( Z180005, 9212004 ); 北京市属高校高水平创新团队支持计划
(IDHT20180510)
第一作者: 李珍萍(1966—),女,汉族,山东平度人,博士,教授。研究方向:优化理论与方法。E-mail:lizhenping66@ 163. com。
引用格式:李珍萍, 焦鹏博, 姜崇宇. 考虑多车型软时间窗的成品油二次配送库存-路径问题[ J]. 科学技术与工程, 2022, 22 (18):
8043-8049.
Li Zhenping, Jiao Pengbo, Jiang Chongyu, et al. Inventory routing problem of refined oil secondary distribution considering multi-vehicle and
soft time windows[J]. Science Technology and Engineering, 2022, 22(18): 8043-8049.
交通运输
考虑多车型软时间窗的成品油二次配送
库存-路径问题
李珍萍, 焦鹏博, 姜崇宇
(北京物资学院信息学院, 北京101149)
摘　要　针对成品油二次配送库存-路径问题(inventory routing problem, IRP),考虑了随机需求、多车型多隔舱等因素,以车辆
配送成本、违反时间窗等惩罚成本之和最小化为目标,建立了混合整数规划模型。设计了求解模型的两阶段启发式算法,第
一阶段根据各加油站的期初库存量、销量的概率分布等确定补货量和时间窗;第二阶段利用遗传算法和C-W 节约算法确定配
送车辆和配送路径。通过模拟计算并与单阶段算法和Gurobi 直接求解模型的结果进行对比,验证了两阶段算法的有效性。
结果显示利用本文方法确定成品油二次配送计划,在避免加油站缺货的同时,有效降低了车辆的配送成本。
关键词　成品油二次配送; 库存-路径问题(inventory routing problem, IRP); 随机需求; 混合整数规划; 两阶段启发式算法
中图法分类号　U116. 2;　　　　文献标志码　A
Inventory Routing Problem of Refined Oil Secondary Distribution
Considering Multi-vehicle and Soft Time Windows
LI Zhen-ping, JIAO Peng-bo, JIANG Chong-yu
(School of Information, Beijing Wuzi University, Beijing 101149, China)
[Abstract]　The inventory-routing problem of refined oil secondary distribution was studied, considering the factors consist of stochas-
tic demand, multi-vehicle and multi-compartment. In order to minimize the total cost such as distribution cost and the penalty cost for
violation of time windows, a mixed integer programming model was established. A two-stage heuristic algorithm was designed. In the
first stage, the replenishment quantity and time windows were determined according to the initial inventory, probability distribution of
sales and so on. In the second stage, the distribution routes and each vehicle were obtained by the genetic algorithm and C-W algo-
rithm. Numerical experiments and results comparison of single-stage algorithm and Gurobi solver verify the effectiveness of the algo-
rithm proposed. The results indicate that our method can not only avoid the stockout of petrol stations, but also effectively reduce the
distribution routing cost.
[Keywords] 　
refined oil secondary distribution; inventory-routing problem; stochastic demand; mixed integer programming; two-
stage heuristic algorithm
　　石油石化产业在国民经济、军事、社会安全和
稳定方面发挥着无可替代的作用。作为成品油供
应链的末端环节,仅成品油二次配送产生的运输成
本就占据成品油供应链总成本的60% ～70% [1]。由
于加油站的油罐容量有限,而需求量具有随机性,
如何控制各个加油站的库存,避免缺货,是石油石
化企业制定配送方案时首先要考虑的关键问题;另
外,由于成品油属于液体危险品,在配送过程中还
需要考虑隔舱运输、是否允许分卸等条件,因此成
品油二次问题属于带多种约束条件的库存-路径问
题(inventory routing problem, IRP),结合实际场景
研究成品油二次配送库存-路径问题可以为石油石
化企业制定成品油二次配送计划,降低配送成本提
供决策参考,具有重要的现实意义。
中外学者从不同角度对成品油二次配送问题
开展广泛深入的研究。王博弘等[2] 对成品油二次
配送的两种主要模式(被动配送和主动配送模式)
进行了研究。大部分学者针对被动配送模式下(即
投稿网址:www. stae. com. cn
加油站需求量已知情况下)的成品油二次配送车辆
路径问题开展了研究。Carotenuto 等[3] 研究了涉及
单一产品单车型的成品油二次配送问题。张源凯
等[4]针对多产品多车型多隔舱的成品油二次配送
问题,提出了可求解大规模算例的启发式算法。
Wang 等[1]分别考虑了单车型和多车型条件下,需
求可拆分的成品油二次配送问题。王旭坪等[5] 和
李珍萍等[6] 研究了带有硬时间窗约束的成品油二
次配送问题, 利用启发式算法对模型进行求解。
Cornillier 等[7]将成品油二次配送问题扩展至多周
期,并设计了多阶段启发式算法。在考虑时间窗的
基础上,Cornillier 等[8] 进一步研究了具有多油库的
成品油二次配送问题。
上述针对被动配送模式下的成品油二次配送
问题研究均假设加油站的需求量和时间窗已知,将
问题简化为带约束的车辆路径问题。实际中很多
石油石化企业采取由供应商管理库存(vendor man-
aged inventory, VMI)的主动配送模式,在主动配送
模式下各个加油站的补货量需要由供应商确定,此
时问题归结为库存-路径问题(IRP)。IRP 问题在实
际中有着广泛的应用, 如危化品配送[9]、物流配
送[10]、可持续发展配送[11] 等。针对成品油二次配
送场景下的IRP 问题,Li 等[12]对于成品油二次配送
中带时间窗的单车型单一产品IRP 问题,设计了一
种基于禁忌搜索的启发式算法。在单车型单一产
品的基础上,Wang 等[13] 进一步研究了带时间窗约
束的成品油二次配送IRP 问题,并考虑了碳税政策
对总成本的影响。Li 等[14] 研究了直接配送模式下
单车型单一产品考虑随机需求的成品油二次配送
IRP 问题, 并使用CPLEX 求解器求解模型。Wu
等[15]研究了考虑时间窗和燃料消耗率的IRP 问题,
利用两阶段混合启发式算法确定最优的库存和路
径决策方案。
虽然有关IRP 的研究成果十分丰富,但现有研
究均对问题进行了不同程度的简化,如严格限制单
车型单隔舱、单一产品等约束,忽视需求随机性、车
型隔舱种类、油罐车装载运输约束等对总成本的影
响。而在实际配送过程中,补货量及配送时间窗确
定、车型种类、隔舱数量等条件往往无法忽视。如
为避免缺货现象以及错峰配送,需要确定合理的补
货量和配送活动的时间窗;为保障成品油在途运输
的安全性,车辆装载油品时需要尽可能满载;为保
持油品运输的经济性,需要配备多种带有隔舱的车
型等。
在已有研究的基础上,现针对随机需求、多车
型多隔舱、油品可分卸配送、带软时间窗的成品油
二次配送库存-路径问题开展研究。以车辆配送成
本、等待成本以及非满载的惩罚成本之和最小为目
标,建立混合整数规划模型。根据模型特点将求解
过程分解为库存控制(确定补货量及时间窗) 和路
径优化两个阶段,首先利用加油站需求量的概率分
布信息确定安全库存、补货量和软时间窗,并且为
每个加油站选择一种车型;然后采用遗传算法求解
各车型单舱车的可行配送路径,最后利用C-W 节约
算法对单舱车可行路径中的节点进行合并,得到多
舱车对应的近似最优配送路径。
1　问题描述和模型建立
1. 1　问题描述与分析
考虑一个VMI 模式下的成品油二次配送网络,
某地区有一个油库为n 个加油站提供单一类型成品
油。油库拥有R 种带有隔舱的油罐车,每种类型车
辆拥有一个或多个相同容量的隔舱,每辆油罐车同
一隔舱中的油品允许分卸到多个加油站。已知油
库与加油站、加油站与加油站之间的最短距离,各
加油站的最大库存容量、期初库存和销售量服从的
概率分布,各种车型的单位距离成本、最大载重量、
车辆维护费用及固定费用。所有车辆均需从油库
出发,完成配送任务后重新返回油库。问如何制定
配送方案,才能满足各个加油站的需求,并且使总
配送成本最小。
在制定成品油二次配送方案时,需要确定为每
个加油站配送的油品数量(补货量)、完成配送任务
需要的最少车辆数及每辆车的配送路径、配送量、
等待时间等,使总成本最小。总成本包括:车辆的
固定成本、行驶成本、等待成本以及非满载的惩罚
成本。等待成本与车辆提前到达加油站时的等待
时间有关;惩罚成本与车辆非满载运输造成的空余
容量有关。
为便于问题求解,做出如下假设:①油库的库
存充足,能够满足所有加油站需求;②各个加油站
在一天中不同时段的销售速率稳定;③一个加油站
在同一时间只能接受一辆油罐车的服务;④在给定
的服务水平下,各个加油站不允许缺货;⑤加油站
每天的销售量不超过罐容量。
1. 2　混合整数规划模型
考虑多车型多隔舱软时间窗的成品油二次配
送库存-路径问题可表示为如下混合整数规划模型,
其中目标函数可表示为
minz = e∑
i∈N∑
j∈N ∑
k∈Kr∑
r∈R
cijxijkr + OC∑
k∈Kr∑
r∈R
ykr +
WC∑
i∈N∑
k∈Kr∑
r∈R
wikr + PC∑
k∈K∑
r∈R
hkr
(1)
4
4
0
8
科　学　技　术　与　工　程
Science Technology and Engineering
2022,22(18)
投稿网址:www. stae. com. cn
式(1)中: N = {0,1,2,…,n,n + 1} 为配送网络节
点集合,其中0、n + 1 为油库,其余节点为加油站;
R = {1,2,…,l} 为车辆类型集合; Kr = {1,2,…,
mr} 为每种类型车辆的集合; e 为车辆的单位距离
行驶成本; cij 为节点i 到节点j 的最短距离; xijkr 为
0-1 变量,若车型为r 的车辆k 经过弧(i,j) 为1,
否则为0;OC 为车辆的固定派遣费用; ykr 为0-1 变
量,使用车型为r 的车辆k 为1,否则为0;WC 为车
辆的单位时间等待成本; wikr 为车型为r 的车辆k
到达加油站i 时的等待时间;PC 为车辆非满载的
单位惩罚成本; hkr 为车型为r 的车辆k 的非满载
容量。式(1) 表示极小化总配送成本,包括车辆行
驶成本、车辆固定成本、早于时间窗到达的等待成
本和非满载时的惩罚成本。
流量平衡约束:
∑
j∈N
x0jkr = ykr, ∀k ∈Kr,r ∈R
(2)
∑
i∈N
x(in+1)kr = ykr, ∀k ∈Kr,r ∈R
(3)
∑
i∈N
xijkr = ∑
j∈N
xjikr,　∀k ∈Kr,r ∈R
(4)
式(2)和式(3) 表示每条路径的起点和终点均
为油库;式(4)表示若一辆车服务加油站,则要从该
加油站离开。
车容量和加油站需求量约束:
∑
i∈N
qikr = (Qkr - hkr)ykr,　∀k ∈Kr,r ∈R
(5)
qikr ≤∑
j∈N
Qmaxxijkr,　∀i ∈N,k ∈Kr,r ∈R
(6)
Tui - Ii ≤∑
k∈Kr∑
r∈R
qikr ≤Si - Ii + ETiui,　∀i ∈N
(7)
式(5)中: qikr 为车型为r 的车辆k 为加油站i 配送的
油品数量; Qkr 为车型为r 的车辆k 拥有的最大载重
量; T 为加油站每天的工作时间; ui 为加油站i 的单
位时间销售率; Ii 为加油站i 的期初库存; Si 为加油
站i 的有效库存容量; ETi 为加油站i 的最早服务时
间。
式(5)表示车辆容量约束;式(6)表示只有车辆
经过加油站才能为其提供服务;式(7) 表示加油站
可接受的配送量范围。
时间窗约束:
sikr + vi + tij - sjkr ≤M(1 - xijkr),
　　∀i,j ∈N,i ≠j,k ∈Kr,r ∈R
(8)
sikr ≤LTi∑
j∈N
xijkr,
　　∀i ∈N,i ≠j,k ∈Kr,r ∈R
(9)
sikr + wikr - bikr = ETi ∑
j∈N\{i}
xijkr,
　　∀i ∈N,k ∈Kr,r ∈R
(10)
式(8)中: sikr 为车型为r 的车辆k 到达加油站i 的时
间;M 为足够大的正数; vi 为车辆在加油站i 的服务
时间; tij 为车辆从节点i 到节点j 的行驶时间; LTi
为加油站i 的最晚服务时间; bikr 为车型为r 的车辆
k 到达加油站i 时晚于ETi 的时间。
式(8)表示车辆到达两个相邻加油站之间的时
间关系;式(9) 和式(10) 表示不允许车辆晚于最晚
时间到达加油站,但允许提前到达。
车辆与路径之间的关系约束:
∑
j∈N
xijkr ≤ykr,　∀i ∈N,k ∈Kr,r ∈R
(11)
∑
j∈N ∑
k∈Kr∑
r∈R
xijkr ≥1,　∀i ∈N,i ≠j
(12)
∑
j∈N
xijkr ≤1,　∀i ∈N,i ≠j,k ∈Kr,r ∈R
(13)
式(11)表示只有动用的车辆才能从一个加油
站到达其他节点;式(12)表示一个加油站至少被服
务一次;式(13)表示对一个加油站同一辆车最多提
供一次服务。
决策变量取值约束:
xijkr ∈{0,1},　∀i,j ∈N,i ≠j,k ∈Kr,r ∈R
(14)
ykr ∈{0,1},　∀i ∈N,k ∈Kr,r ∈R
(15)
sikr ≥0,　∀i ∈N,k ∈Kr,r ∈R
(16)
qikr ≥0,　∀i ∈N,k ∈Kr,r ∈R
(17)
wikr ≥0,　∀i ∈N,k ∈Kr,r ∈R
(18)
bikr ≥0,　∀i ∈N,k ∈Kr,r ∈R
(19)
hkr ≥0,　∀k ∈Kr,r ∈R
(20)
式(14) ~ 式(20)为决策变量取值约束。
2　算法设计
由于库存-路径问题属于NP-hard 问题,对于大
规模成品油二次配送问题,采用多阶段分解策略求
解,既可以降低问题复杂度,又可以设计启发式算法
在满足精度要求的同时兼顾问题求解的速度。因此,
将结合模型特征,将问题分解为库存控制和路径优化
两个阶段,首先根据加油站销售量的概率分布信息和
给定的服务水平确定各加油站的补货量,为每个加油
站选择合适的车型,然后利用车型分组结合遗传算法
和C-W 节约算法对路径进行优化。
2. 1　库存控制
2. 1. 1　确定各加油站最晚配送时间窗
根据各个加油站的历史销售数据,确定计划期
内每天加油站销售量服从的概率分布(销售量均值
5
4
0
8
2022,22(18)
李珍萍,等:考虑多车型软时间窗的成品油二次配送库存-路径问题
投稿网址:www. stae. com. cn
di 和标准差σi ),在给定的服务水平下,确定各加油
站的安全库存水平SIi。假设加油站每天各个时段
的销售速率稳定,根据每天的销售量均值di 和加油
站每天的工作时间T ,计算单位时间的销售速率
ui = di / T 。为保证配送车辆到达时,加油站的实际
库存水平不低于安全库存,按照式(21)可确定车辆
到达加油站的最晚时间LTi:
LTi ≤Ii - SIi
ui
(21)
2. 1. 2　确定各加油站补货量和最早配送时间窗
每个加油站的配送时间点根据最晚配送时间
和加油站的平均工作时间T/ 2 确定, 如式(22)
所示:
T′ =
LT,
LT < T/ 2
T/ 2,
其他
{
(22)
进一步根据加油站的有效库存容量、期初库存
量和配送时间点T′ ,按照式(23)确定补货量:
qi =
0,
Ii ≥di + SIi
Si - Ii + uiT′,
其他
{
(23)
根据式(23)可知,当加油站的期初库存量大于
平均需求量和安全库存量之和时,不需要安排补
货,否则安排补货,按照使加油站在配送时间点的
库存量恢复到有效库存容量为标准,确定实际补
货量。
为保证配送车辆到达时加油站有足够空余容
量装载配送量,按照式(24)可确定每个加油站接受
服务的最早时间ETi:
ETi =
0,
LT < T/ 2
qi + Ii - Si
ui
,
其他
{
(24)
2. 1. 3　确定各加油站最佳服务车型
在多车型成品油配送问题中,由于不同车型隔
舱容量和总装载量不同,对应的配送成本也不同,
因此制定配送计划应该尽可能提高车辆利用率,减
少车辆的使用数和空载率。在允许分卸的情况下,
车容量越大,可以服务加油站越多,平均使用成本
越低。因此优先使用大容量车型可以有效减少配
送成本。
另一方面,由于不同加油站的补货量不同,对
于补货量较少的加油站,如果使用大容量车型进行
配送,车辆空载率较高。因此应该将加油站的补货
量与车型进行匹配,尽可能提高车辆的满载率。
根据各个加油站的补货量和各种车辆的隔舱
容量,为每个加油站匹配一种合适的隔舱容量和车
型。对于某个加油站,根据其补货量,分别计算使
用各种隔舱对应的满载率。选择满载率最大的隔
舱对应的车型作为该加油站的实际使用车型。然
后,根据各加油站的匹配车型,将加油站进行分组,
同一组加油站使用相同的车型。这样,同一组加油
站的成品油配送问题简化为单一车型VRP 问题。
2. 2　路径优化
2. 2. 1　遗传算法
加油站的补货量和匹配车型隔舱确定之后,多
车型IRP 问题转化为多个单车型VRP 问题。对服
务加油站的同一种车型,首先假设每辆车只有一个
隔舱,根据隔舱容量确定需要使用的单舱车数量及
配送路径。按照下列规则设计遗传算法求解。
(1) 编码。采用自然数编码表示染色体结构,
0 表示油库,1,2,…,n 表示加油站。为方便运算,去
掉每条路径中的起点和终点0,将所有路径合并在
一起形成一条染色体。
(2) 解码。对于编码[4 5 7 3 6 1 9 2 8],首先
安排车辆从油库出发前往加油站4,考虑时间窗、车
辆剩余油品量、加油站5 的补货量等约束决定是否
服务加油站5,如果满足约束,则继续服务加油站5,
即[0-4-5],否则回到油库,即[0-4-0],之后重新安
排车辆服务加油站5,然后判断约束决定是否服务
后续加油站。循环上述过程,直到遍历完所有染色
体编码为止,此时恰好将染色体序列拆分为若干个
满足约束的配送回路,得到一个可行解。
(3) 种群初始化。通过随机生成M 个含有
1 ~ 9序列,形成初始种群。
(4) 适应度计算。对于种群中的每个个体si
(i = 1,2,…,M) ,首先通过解码得到一组可行路
径,计算其对应的总配送成本Ci 。找出所有个体对
应的总成本最大值Cmax ,按照式(25)计算每个个体
的适应度f(si) :
f(si) = 2Cmax - Ci
(25)
(5) 选择。采用轮盘赌法选择个体,质量较优
的个体优先进入下一代。
(6) 交叉。采用部分匹配交叉法。
(7) 变异。采用逆转变异方法,在选定个体中
随机产生两个逆转点,把两个逆转点的基因对调,
得到新个体。
(8) 终止条件。达到最大迭代次数则终止迭
代,否则转规则(3)。
(9) 输出结果。将种群中适应度最优个体作为
最优解输出,得到最优路径。
2. 2. 2　C-W 节约算法
根据遗传算法求出服务所有加油站需要使用
的各车型单舱车数量及配送路径,该方案可以看成
单舱车的可行配送方案。接下来根据C-W 节约算
6
4
0
8
科　学　技　术　与　工　程
Science Technology and Engineering
2022,22(18)
投稿网址:www. stae. com. cn
法将单舱车配送方案合并,得到多舱车对应的配送
方案。
算法的基本步骤如下。
(1) 合并节点。先将遗传算法得到每条单舱车
配送路径上的客户点合并为一个节点,同时更新单
舱车到达各个节点的时间,得到的新序列作为节约
算法的初始解。节点合并过程如图1 所示。
图1 可表示为解码后的序列,黄色节点代表油
库,橙色与蓝色节点代表客户。合并节点即将一条
路径内的客户点合并为一个节点,得到的序列可以
看作是直接配送路径的集合。
图1　节点合并示意图
Fig. 1　Nodes merging diagram
(2) 节约操作。应用经典C-W 节约算法,将合
并后的独立节点进行连接,计算连接后的里程节约
值,按照里程节约值由大到小的顺序,在满足时间
窗的条件下对路径进行合并操作,对初始解进行优
化。如,路径0-1-0 和0-4-0(0 为油库) 的里程分别
是5、8 km,合并后总里程为10 km,合并后的路径长
度比两条独立路径的总长度节约了3 km,此时可以
将两条路径合并为0-1-4-0 或0-4-1-0(由时间窗顺
序决定)。节约操作中路径合并数量不超过车辆的
隔舱数,合并后得到多舱车的配送路径。
(3) 输出结果。将节约算法得到的最优路径展
开还原,如合并后序列为0-a-b-0,a 包含2-4,b 包含
3-1,则展开还原后的路径为0-(2-4)-(3-1)-0,该路
径即为双舱车的实际配送路径。
对每种车型执行以上算法,得到最终配送计划。
3　模拟计算与结果分析
3. 1　算例描述
在VMI 模式下,一个油库为50 个加油站配送
单一品种成品油,使用的车辆类型有4 种,油罐车的
行驶速度相同均为30 km/ h。给出一个油库(编号
为0)和前10 个加油站(编号为1 ~ 10),各个加油
站的横坐标(X)、纵坐标(Y)等信息如表1 所示,车
辆信息如表2 所示,各项成本信息如表3 所示,其中
加油站及油库的位置由平面直角坐标系确定,各加
油站最大库存容量、期初库存、服务时间,根据加油
站前30 日销量服从的概率分布确定的销量均值和
给定90% 服务水平确定的安全库存已知,各加油站
每天的工作时间为24 h。
3. 2　算例求解与结果分析
根据上述算例数据,首先利用第一阶段算法确
定需要服务的加油站以及各加油站的补货量和时
间窗,然后利用第二阶段算法优化各车型对应的路
径。设置种群规模为30,最大迭代次数为200 次,
得到按车型分组后的计算结果如表4 所示。
结果显示,50 个加油站中,有30 个加油站的库
存量可以满足加油站的销量,不需要安排补货,其余
20 个加油站需要配送油品。配送计划使用了4 种车
型共12 辆车,其中车型2 与车型3 均使用双舱车进
行配送,车型4 则动用了3 舱车与4 舱车。对于大部
分加油站来说,允许服务的最早时间与最晚时间之间
的跨度较长,时间窗较为宽松,因此需要服务的加油
站均可满足时间窗要求,未出现等待现象。在50 个
节点的算例规模下,总配送成本为7 438. 6 元,程序运
行10 次的平均总用时为1. 717 s。
由于VMI 模式下的成品油二次配送库存-路径
问题属于NP-hard 问题,因此,将通过小规模算例分
表1　油库及加油站信息
Table 1　Information of the oil deport and petrol stations
编号
X / km
Y/ km
销量均值/ L
有效容量/ L
安全库存/ L
期初库存/ L
服务时间/ h
0
0
0
—
—
—
—
—
1
- 7
1
8 879
19 000
1 218
10 787
1
2
2
15
922
19 000
482
6 910
1
3
23
15
9 501
19 000
1 862
11 226
1
4
- 17
- 10
7 993
19 000
766
7 768
1
5
24
0
6 236
24 000
1 904
17 351
1
6
25
- 18
5 148
24 000
1 775
6 219
1
7
- 5
6
1 508
24 000
1 017
17 838
1
8
- 26
- 29
13 478
24 000
376
12 769
1
9
- 11
- 12
8 131
24 000
367
17 813
1
10
- 27
27
687
24 000
1 136
10 001
1
7
4
0
8
2022,22(18)
李珍萍,等:考虑多车型软时间窗的成品油二次配送库存-路径问题
投稿网址:www. stae. com. cn
表2　车辆信息
Table 2　Information of the vehicles
序号
隔舱容量/ L
隔舱数
车型
1
21 200
1
1
2
13 200
1
2
3
13 200
2
2
4
10 560
1
3
5
10 560
2
3
6
5 000
1
4
7
5 000
2
4
8
5 000
3
4
9
5 000
4
4
表3　成本信息
Table 3　Information of the cost
行驶成本/
(元·km - 1)
固定成本/
(元·车次- 1)
等待成本/
(元·h - 1)
惩罚成本/
(元·L - 1)
5
15
10
1. 5
表4　配送方案
Table 4　Results of the distribution
路径
车型
0-44-0, 0-40-0, 0-39-0
1
0-25-28-0, 0-21-24-0,
0-18-6-0,0-23-22-0, 0-12-14-0
2
0-17-16-0, 0-8-29-0
3
0-11-0, 0-4-3-0
4
析两阶段启发式算法的求解质量与时间。根据
表1 ~ 表3的加油站、车辆、各项成本信息,在各种信
息保持不变的基础上, 随机选取n 个加油站
(n = 5,7,9,11), 生成4 个小规模算例。利用商业
求解器Gurobi 直接求解针对每个算例的混合整数
规划模型得到精确解。然后利用两阶段启发式算
法对同一算例运行10 次得到近似最优解,将求解器
得到的精确解与算法运算10 次得到的平均近似最
优解进行对比,其中第二阶段算法参数设置不变。
两种方法得到的结果如表5 所示。从表5 可以
观察到,对于包含加油站个数最多的算例,两阶段
启发式算法的平均求解时间在1 s 左右,而求解器
的求解时间则随加油站个数的增加呈指数级增长。
对于包含5 个加油站的最小规模算例,求解器求解
出最优解需要359. 52 s,但随着算例规模的增加,求
解器的求解时间远远超过两阶段启发式算法的平
均时间,当算例包含11 个加油站时,求解器无法在
可接受时间内求出最优解。在求解质量方面,Guro-
bi 求解器得到的最优总成本比两阶段启发式算法
的结果更优,但两者结果的差值在包含不同加油站
个数的算例中仍可接受且较为稳定。并且当加油
站个数超过9 个时,求解器无法在可接受时间内得
到最优解,而两阶段启发式算法则可以快速求出近
表5　小规模算例的求解结果
Table 5　Results of small instances
N∗
Gurobi 求解器精确解
GC / 元
GT/ s
两阶段启发式算法平均解
HC / 元
HT/ s
5
1 511. 50
359. 52
1 598. 50
0. 41
7
1 875. 50
1 337. 84
1 989. 75
0. 31
9
2 294. 00
3 012. 70
2 441. 00
0. 97
11
—
—
2 989. 00
1. 02
　注:N∗为各算例包含的加油站数量;GC 表示利用Gurobi 求解得
到的最优配送成本;GT 表示利用Gurobi 直接求解混合整数规划模
型所需要的时间;HC 表示两阶段启发式算法运行10 次得到的平均
总成本;HT 表示两阶段启发式算法运行10 次的平均求解时间。
似最优解,因此当问题规模逐渐增加时,两阶段启
发式算法的时间优势将更加明显。
为验证本文算法的有效性,设计求解该问题的
单阶段算法,在单阶段算法中,油库只能在已知初
始库存和库存容量的前提下选择合适车型,采用直
接配送模式避免加油站出现缺货现象。设置Gurobi
求解时间为1 800 s,得到可接受时间内的最佳可行
解。针对表1 的50 个加油站,将本文两阶段算法
(算法1)与单阶段算法(算法2)、Gurobi 最佳可行
解算法(算法3)进行比较,结果如表6 所示。
由表6 可知,虽然两阶段启发式算法在计算时间
上不如单阶段算法,但也远远优于Gurobi 求解器算
法,同时两阶段启发式算法比单阶段算法和Gurobi最
佳可行解算法的求解效果更好。
表6　算法结果对比
Table 6　Comparison of algorithm results
对比指标
算法1
算法2
算法3
成本/ 元
7 438. 60
9 683. 30
8 125. 00
时间/ s
1. 72
0. 20
1 800. 00
此外,为验证本文算法与研究结果的可靠性,
在不同规模算例中对算法进行测试,并对比不同算
法得到的结果。加油站个数从100 开始,每次递增
50,直到加油站数量达到500。分别调用算法1、算
法2 求解9 组算例,每组算例分别运行10 次并记录
平均总配送成本以及平均求解时间,记算法3 求解
时间为1 800 s。针对算法2,使用SC 表示算法2 的
总成本(元);ST 表示算法2 的求解时间(s)。调用
三种算法得到不同规模算例的结果如表7 所示。
由表7 可知,在不多于500 个加油站的算例中,
算法1 与算法2 耗时随算例规模的增加存在缓慢上
升趋势, 并且虽然算法2 的平均求解时间小于
算法1的求解时间,但对于规模最大的算例,算法1
的平均求解时间也不超过6 s,说明针对此数量级下
的问题规模,本文研究的两阶段启发式算法仍然可
以保持满意的求解速度。
8
4
0
8
科　学　技　术　与　工　程
Science Technology and Engineering
2022,22(18)
投稿网址:www. stae. com. cn
表7　不同规模算例下的结果
Table 7　Results of instances under different sizes
N∗
算法1
HC / 元
HT/ s
算法2
SC / 元
ST/ s
算法3
GC / 元
GT/ s
100
18 800
2. 75
23 380
0. 34
20 627
1 800
150
22 471
3. 20
27 760
0. 53
25 046
1 800
200
25 385
3. 19
30 987
0. 62
27 805
1 800
250
30 891
3. 60
36 554
0. 67
34 423
1 800
300
34 821
3. 37
41 945
0. 86
38 320
1 800
350
41 484
4. 64
49 719
0. 91
47 483
1 800
400
45 032
5. 04
54 076
1. 55
51 695
1 800
450
45 596
5. 20
55 792
1. 97
53 477
1 800
500
53 120
5. 98
64 573
2. 23
61 678
1 800
综合对比三种算法的求解时间,以及得到的平
均总成本或最佳可行成本可知,虽然算法1 在各个
算例中的平均求解时间大于算法2,但在实际应用
中仍可接受并且明显小于算法3 的求解时间,同时,
算法1 的平均总成本优于另外两种算法,算法3 的
平均总成本次于算法1 但优于算法2,说明本文的
两阶段启发式算法在不同规模算例下得到的结果
仍然具有较高的可靠性。
4　结论
结合成品油二次配送问题的实际场景,研究了
随机需求、多车型软时间窗、满载可分卸的成品油
二次配送库存-路径问题,以总配送成本极小化为目
标建立了混合整数规划模型,利用分解策略将问题
求解过程分解为库存控制和路径优化两个阶段,并
设计了路径优化阶段的遗传算法和C-W 节约算法,
通过不同规模算例验证了模型和算法的有效性。
本文算法的设计思路可推广其他类似问题,为
解决其他背景下考虑随机需求的多车型软时间窗
库存-路径问题提供了研究思路。
在成品油二次配送库存-路径问题的研究中,对
加油站的销售量进行了一定的简化,假设加油站的
销售量在一天中各个时段服从相同的分布规律。
实际中,加油站每天不同时段的销量变化可能比较
大,此时需要分时段考虑销售量服从的分布规律,
这种情况下,为了确保加油站不断货,需要用更科
学的方法计算补货时间窗和补货量。另外,本文算
法仍然属于启发式算法,无法保证找到精确最优
解,接下来可以结合模型特点,研究精确算法或其
他类型的智能算法。
参
考
文
献
[1] Wang L, Kinable J, Van Woensel T. The fuel replenishment prob-
lem: a split-delivery multi-compartment vehicle routing problem
with multiple trips[J]. Computers & Operations Research, 2020,
118: 104904.
[2] 王博弘, 梁永图, 张浩然, 等. 成品油二次配送研究进展[J].
油气储运, 2018, 37(2): 121-126.
Wang Bohong, Liang Yongtu, Zhang Haoran, et al. Research pro-
gress of secondary distribution of product oil[J]. Oil & Gas Storage
and Transportation, 2018, 37(2): 121-126.
[3] Carotenuto P, Giordani S, Celani D. Planning retail distribution of
fuel oils[J]. Transportation Research Procedia, 2017, 27: 484-491.
[4] 张源凯, 孙丽君, 胡祥培. 成品油配送多车舱车辆指派及路径
优化问题研究[J]. 运筹与管理, 2017, 26(7): 1-9.
Zhang Yuankai, Sun Lijun, Hu Xiangpei. Multi-compartment vehi-
cle dispatching and routing for product oil distribution[J]. Opera-
tions Research and Management Science, 2017, 26(7): 1-9.
[5] 王旭坪, 詹红鑫, 孙自来, 等. 多行程带补货时间窗的成品油
多舱配送路径优化[ J].
管理工程学报, 2020, 34 ( 4 ):
182-195.
Wang Xuping, Zhan Hongxin, Sun Zilai, et al. Optimization of
routes for multi-compartment, multi-trip refined oil distribution with
replenishment time[J]. Journal of Industrial Engineering/ Engineer-
ing Management, 2020, 34(4): 182-195.
[6] 李珍萍, 杨光, 韩倩倩. 考虑工作量均衡的成品油二次配送车
辆路径问题[J]. 系统仿真学报, 2022, 34(2): 221-233.
Li Zhenping, Yang Guang, Han Qianqian. Vehicle routing problem
of refined oil secondary distribution considering workload balance
[J]. Journal of System Simulation, 2022, 34(2): 221-233.
[7] Cornillier F, Boctor F F, Laporte G, et al. A Heuristic for the
multi-period petrol station replenishment problem [ J]. European
Journal of Operational Research, 2008, 191(2): 295-305.
[8] Cornillier F, Boctor F, Renaud J. Heuristics for the multi-depot
petrol station replenishment problem with time windows[J]. Euro-
pean Journal of Operational Research, 2012, 220(2): 361-369.
[9] Su Z, Lü Z, Wang Z, et al. A matheuristic algorithm for the inven-
tory routing problem[ J]. Transportation Science, 2020, 54 (2):
330-354.
[10] 李珍萍, 焦鹏博. 基于供应商管理库存模式的配送路径优化
问题[J]. 科学技术与工程, 2021, 21(26): 11362-11367.
Li Zhenping, Jiao Pengbo. Distribution routing optimization prob-
lem based on vendor managed inventory mode[J]. Science Tech-
nology and Engineering, 2021, 21(26): 11362-11367.
[11] Afra A P, Behnamian J. Lagrangian heuristic algorithm for green
multi-product production routing problem with reverse logistics and
remanufacturing[ J]. Journal of Manufacturing Systems, 2021,
58: 33-43.
[12] Li K, Chen B, Sivakumar A I, et al. An inventory-routing prob-
lem with the objective of travel time minimization[ J]. European
Journal of Operational Research, 2014, 236(3): 936-945.
[13] Wang S, Tao F, Shi Y. Optimization of inventory routing problem
in refined oil logistics with the perspective of carbon tax[J]. Ener-
gies, 2018, 11(6): 1437.
[14] Li Z, Zhang Y, Zhang G. Two-stage stochastic programming for
the refined oil secondary distribution with uncertain demand and
limited inventory
capacity [ J ].
IEEE
Access,
2020,
8:
119487-119500.
[15] Wu W, Zhou W, Lin Y, et al. A Hybrid Metaheuristic Algorithm
for Location Inventory Routing Problem with Time Windows and
Fuel Consumption[J]. Expert Systems with Applications, 2021,
166: 114034.
9
4
0
8
2022,22(18)
李珍萍,等:考虑多车型软时间窗的成品油二次配送库存-路径问题
